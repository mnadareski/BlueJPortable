[Launch]
ProgramExecutable=Bluej\bluej.exe
HideCommandLineWindow=true
SplashTime=0
WaitForProgram=true

[Activate]
Registry=true
JDK=require

[RegistryKeys]
bluej_portable=HKCU\Software\BlueJ

[RegistryValueWrite]
HKCU\Software\BlueJ\BlueJ\3.0.7\CurrentVM=REG_SZ:%PAL:PortableAppsDir%\CommonFiles\OpenJDK\
HKCU\Software\BlueJ\BlueJ\3.0.8\DesktopShortcut=REG_DWORD:0
HKCU\Software\BlueJ\BlueJ\3.0.8\MenuShortcut=REG_DWORD:0

[RegistryCleanupIfEmpty]
1=HKCU\Software\BlueJ

[DirectoriesMove]
bluej=%USERPROFILE%\bluej

[FilesMove]
config\*.defs=%PAL:AppDir%\BlueJ\lib
config\*.bak=%PAL:AppDir%\BlueJ\lib

[FileWrite1]
Type=Replace
File=%PAL:AppDir%\BlueJ\lib\bluej.defs
Find=bluej.userHome=*
Replace=bluej.userHome=%PAL:DataDir%\profile

[FileWrite2]
Type=Replace
File=%PAL:AppDir%\BlueJ\lib\bluej.defs
Find=bluej.userlibLocation=*
Replace=bluej.userlibLocation=%PAL:DataDir%\userlibs

[FileWrite3]
Type=Replace
File=%PAL:AppDir%\BlueJ\lib\bluej.defs
Find=bluej.extensions.systempath=*
Replace=bluej.extensions.systempath=%PAL:DataDir%\extensions

[DirectoriesCleanupIfEmpty]
1=%USERPROFILE%\bluej